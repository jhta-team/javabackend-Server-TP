<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.mybatis.example.BlogMapper">
	<insert id="insertCody" parameterType="CodyBoardDto">
		INSERT INTO codyboard values(seq_cody.NEXTVAL, #{title}, #{content}, #{images}, 0, sysdate, #{categoryID}, #{userID})
	</insert>
	
	<select id="findAllCodyBoard" resultType="CodyBoardDto">
		SELECT * FROM CODYBOARD order by no asc
	</select>
  	
	<select id="codyBoardCount" resultType="int">
	 	SELECT count(*) FROM codyBoard
	</select>
	
	<select id="codyBoardPageNation" resultType="CodyBoardDto" parameterType="int">
	 	<!-- SELECT * FROM codyBoard where no >= #{start} and no <![CDATA[<=]]> #{end} -->
	 	SELECT * FROM (SELECT rownum AS num, co.* FROM (SELECT * FROM CODYBOARD co ORDER BY NO DESC) co) where num >= #{start} and num <![CDATA[<=]]> #{end}
	</select>
	
	<select id="codyBoardFindOne" resultType="CodyBoardDto" parameterType="int">
		SELECT * FROM CODYBOARD WHERE NO = #{codyBoardNo}
	</select>
	
	<update id="codyBoardUpdate" parameterType="CodyBoardUpdateDto">
		update codyboard set title=#{title}, content=#{content}, categoryID=#{categoryID}, regDate=sysdate, images=#{images} where no=#{no}
	</update>
	
	<update id="codyBoardHit" parameterType="int">
		update codyboard set hit=hit + 1 where no = #{codyBoardNo}
	</update>
	
	<delete id="codyBoardDelete" parameterType="int">
		delete from codyboard where no = #{codyBaordNo}
	</delete>
</mapper>

